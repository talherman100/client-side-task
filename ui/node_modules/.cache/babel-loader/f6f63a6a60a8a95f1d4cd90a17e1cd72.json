{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\\\u05D8\\u05DC\\\\Desktop\\\\dotnet-react-web-socket-main\\\\factory-control\\\\ui\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useRef,useContext,useEffect,useState}from'react';import useMobileDetect from'use-mobile-detect-hook';import{Container}from'react-bootstrap';import{PhotoCard}from'./PhotoCard';import{WebSocketContext}from'../context/WebSocket';import{FactoryService}from'../services/service';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function PhotoList(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoadingAlbum=_useState2[0],setIsLoadingAlbum=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),lastAlbum=_useState4[0],setLastAlbum=_useState4[1];var _useContext=useContext(WebSocketContext),photoList=_useContext.photoList;var detectMobile=useMobileDetect();var listInnerRef=useRef();useEffect(function(){var onScroll=function onScroll(){var bottom=document.documentElement.scrollHeight-document.documentElement.scrollTop<1500;if(bottom&&!isLoadingAlbum){setIsLoadingAlbum(true);FactoryService.AddAlbum({id:lastAlbum+1});setLastAlbum(lastAlbum+1);setIsLoadingAlbum(false);}};window.addEventListener('scroll',onScroll);return function(){return window.removeEventListener('scroll',onScroll);};},[photoList]);return/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(Container,{children:detectMobile.isMobile()?/*#__PURE__*/_jsx(\"div\",{className:\"mobilePhotos\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"mobileImageGrid\",children:Array.isArray(photoList)&&photoList.length>2&&photoList.map(function(element,index){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(PhotoCard,{albumId:element.albumId,id:element.id,title:element.title,url:element.url,thumbnailUrl:element.thumbnailUrl,description:element.description,type:\"first\"})},index);})})}):/*#__PURE__*/_jsxs(\"div\",{ref:listInnerRef,children:[/*#__PURE__*/_jsx(\"ul\",{className:\"topImagesGrid\",children:Array.isArray(photoList)&&photoList.length>2&&photoList.slice(0,3).map(function(element,index){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(PhotoCard,{albumId:element.albumId,id:element.id,title:element.title,url:element.url,thumbnailUrl:element.thumbnailUrl,description:element.description,type:\"first\"})},index);})}),/*#__PURE__*/_jsx(\"ul\",{className:\"imagesGrid\",children:Array.isArray(photoList)&&photoList.length>3&&photoList.slice(3).map(function(element,index){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(PhotoCard,{albumId:element.albumId,id:element.id,title:element.title,url:element.url,thumbnailUrl:element.thumbnailUrl,description:element.description,type:\"notfirst\"})},index);})})]})})});}","map":{"version":3,"sources":["C:/Users/טל/Desktop/dotnet-react-web-socket-main/factory-control/ui/src/components/PhotoList.js"],"names":["React","useRef","useContext","useEffect","useState","useMobileDetect","Container","PhotoCard","WebSocketContext","FactoryService","PhotoList","isLoadingAlbum","setIsLoadingAlbum","lastAlbum","setLastAlbum","photoList","detectMobile","listInnerRef","onScroll","bottom","document","documentElement","scrollHeight","scrollTop","AddAlbum","id","window","addEventListener","removeEventListener","isMobile","Array","isArray","length","map","element","index","albumId","title","url","thumbnailUrl","description","slice"],"mappings":"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","sourcesContent":["import React, { useRef, useContext, useEffect, useState } from 'react';\nimport useMobileDetect from 'use-mobile-detect-hook';\nimport { Container } from 'react-bootstrap';\nimport { PhotoCard } from './PhotoCard';\nimport { WebSocketContext } from '../context/WebSocket';\nimport { FactoryService } from '../services/service';\n\nexport function PhotoList() {\n  const [isLoadingAlbum, setIsLoadingAlbum] = useState(false);\n  const [lastAlbum, setLastAlbum] = useState(1);\n  const { photoList } = useContext(WebSocketContext);\n  const detectMobile = useMobileDetect();\n  const listInnerRef = useRef();\n\n  useEffect(() => {\n    const onScroll = () => {\n      const bottom = document.documentElement.scrollHeight - document.documentElement.scrollTop < 1500;\n      if (bottom && !isLoadingAlbum) {\n        setIsLoadingAlbum(true);\n        FactoryService.AddAlbum({ id: lastAlbum + 1 });\n        setLastAlbum(lastAlbum + 1);\n        setIsLoadingAlbum(false);\n      }\n    };\n    window.addEventListener('scroll', onScroll);\n\n    return () => window.removeEventListener('scroll', onScroll);\n  }, [photoList]);\n\n  return (\n    <div className=\"\">\n      <Container>\n        {detectMobile.isMobile() ?\n          (\n            <div className=\"mobilePhotos\">\n              <ul className=\"mobileImageGrid\">\n                {\n                  Array.isArray(photoList) && photoList.length > 2 &&\n                  photoList.map((element, index) => (\n                    <li key={index}>\n                      <PhotoCard albumId={element.albumId} id={element.id} title={element.title} url={element.url} thumbnailUrl={element.thumbnailUrl} description={element.description} type=\"first\" />\n                    </li>\n                  ))\n                }\n              </ul>\n            </div>\n          )\n          :\n          (\n            <div ref={listInnerRef}>\n              <ul className=\"topImagesGrid\">\n                {\n                  Array.isArray(photoList) && photoList.length > 2 &&\n                  photoList.slice(0, 3).map((element, index) => (\n                    <li key={index}>\n                      <PhotoCard albumId={element.albumId} id={element.id} title={element.title} url={element.url} thumbnailUrl={element.thumbnailUrl} description={element.description} type=\"first\" />\n                    </li>\n                  ))\n                }\n              </ul>\n              <ul className=\"imagesGrid\">\n                {\n                  Array.isArray(photoList) && photoList.length > 3 &&\n                  photoList.slice(3).map((element, index) => (\n                    <li key={index}>\n                      <PhotoCard albumId={element.albumId} id={element.id} title={element.title} url={element.url} thumbnailUrl={element.thumbnailUrl} description={element.description} type=\"notfirst\" />\n                    </li>\n                  ))\n                }\n              </ul>\n            </div>\n          )\n        }\n      </Container>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}